{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useTheme}from\"../context/ThemeContext\";import TrainingLogManager from\"./TrainingLogManager\";import{SkeletonLoader}from\"./LoadingSpinner\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const manager=new TrainingLogManager();export default function SavedTablesPage(_ref){let{previewMode=false}=_ref;const navigate=useNavigate();const{theme}=useTheme();const[tables,setTables]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isHoveringNewLog,setIsHoveringNewLog]=useState(false);const[showBackButton,setShowBackButton]=useState(true);const[lastScrollY,setLastScrollY]=useState(0);const[deletePopup,setDeletePopup]=useState({show:false,tableId:null,tableName:\"\"});useEffect(()=>{const fetchTables=async()=>{try{setIsLoading(true);const result=await manager.listTables();setTables(result);}catch(error){console.error(\"Error fetching tables:\",error);}finally{setIsLoading(false);}};fetchTables();},[]);// Scroll detection for back button\nuseEffect(()=>{const handleScroll=()=>{const currentScrollY=window.scrollY;// Show button if at top of page or scrolling up\nconst isAtTop=currentScrollY<50;const isScrollingUp=currentScrollY<lastScrollY;setShowBackButton(isAtTop||isScrollingUp);setLastScrollY(currentScrollY);};window.addEventListener('scroll',handleScroll,{passive:true});return()=>window.removeEventListener('scroll',handleScroll);},[lastScrollY]);const handleNewTable=async()=>{const newTable=manager.createNewTable();await manager.createTable(newTable);navigate(\"/log/\".concat(newTable.id));};const handleOpenTable=id=>{navigate(\"/log/\".concat(id));};const handleDeleteTable=async(id,tableName)=>{setDeletePopup({show:true,tableId:id,tableName:tableName});};const confirmDelete=async()=>{if(deletePopup.tableId){await manager.deleteTable(deletePopup.tableId);setTables(prev=>prev.filter(table=>table.id!==deletePopup.tableId));setDeletePopup({show:false,tableId:null,tableName:\"\"});}};const cancelDelete=()=>{setDeletePopup({show:false,tableId:null,tableName:\"\"});};// Format date for display\nconst formatDate=dateString=>{if(!dateString)return\"\";const date=new Date(dateString);return date.toLocaleDateString('en-US',{weekday:'short',year:'numeric',month:'short',day:'numeric'});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\",paddingTop:previewMode?\"1rem\":\"4rem\",background:theme.background,minHeight:previewMode?\"auto\":\"100vh\",color:theme.text,position:\"relative\",transition:\"background-color 0.3s ease, color 0.3s ease\"},children:[!previewMode&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),style:{position:\"fixed\",top:\"1rem\",left:\"1rem\",background:theme.accentSecondary,color:theme.accent,padding:\"0.7rem 1.4rem\",border:\"none\",borderRadius:\"10px\",fontWeight:\"600\",fontSize:\"1rem\",cursor:\"pointer\",zIndex:1000,transition:\"all 0.3s ease\",opacity:showBackButton?1:0,transform:showBackButton?\"translateY(0)\":\"translateY(-10px)\",pointerEvents:showBackButton?\"auto\":\"none\"},onMouseOver:e=>e.currentTarget.style.background=theme.accentHover,onMouseOut:e=>e.currentTarget.style.background=theme.accentSecondary,children:\"\\u2190 Back to Dashboard\"}),!previewMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:\"2.5rem\",marginBottom:\"2rem\",color:theme.accent,textAlign:\"center\",transition:\"color 0.3s ease\"},children:\"Saved Training Logs\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginBottom:\"2rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:\"160px\",height:\"60px\",background:\"linear-gradient(to top, \".concat(theme.accentSecondary,\", \").concat(theme.accent,\", \").concat(theme.accentHover,\")\"),borderRadius:\"50px\",border:\"none\",outline:\"none\",cursor:\"pointer\",boxShadow:\"0 15px 30px rgba(0, 0, 0, 0.3)\",overflow:\"hidden\",transition:\"transform 0.3s ease\"},onMouseEnter:()=>setIsHoveringNewLog(true),onMouseLeave:()=>setIsHoveringNewLog(false),onClick:handleNewTable,children:[/*#__PURE__*/_jsx(\"span\",{style:{position:\"absolute\",width:\"100%\",top:isHoveringNewLog?\"-100%\":\"50%\",left:0,transform:\"translateY(-50%)\",fontSize:\"14px\",textTransform:\"uppercase\",letterSpacing:\"1px\",color:\"#fff\",fontWeight:\"600\",textAlign:\"center\",transition:\"top 0.5s ease\"},children:\"+ New Log\"}),/*#__PURE__*/_jsx(\"span\",{style:{position:\"absolute\",width:\"100%\",top:isHoveringNewLog?\"50%\":\"150%\",left:0,transform:\"translateY(-50%)\",fontSize:\"14px\",textTransform:\"uppercase\",letterSpacing:\"1px\",color:\"#fff\",fontWeight:\"600\",textAlign:\"center\",transition:\"top 0.5s ease\"},children:\"Let's Begin\"})]})})]}),isLoading?/*#__PURE__*/_jsx(SkeletonLoader,{type:\"card\",count:3}):tables.length===0?/*#__PURE__*/_jsx(\"p\",{style:{opacity:0.7,fontSize:\"1.1rem\",textAlign:\"center\",marginTop:\"2rem\",color:theme.textSecondary,transition:\"color 0.3s ease\"},children:\"No saved logs yet.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0},children:tables.map(table=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"1rem\",padding:\"1.5rem\",background:theme.cardBackground,borderRadius:\"12px\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",border:\"1px solid \".concat(theme.cardBorder),transition:\"transform 0.2s, border-color 0.2s, background-color 0.3s ease\"},onMouseEnter:e=>{e.currentTarget.style.transform=\"translateY(-2px)\";e.currentTarget.style.borderColor=theme.accent;},onMouseLeave:e=>{e.currentTarget.style.transform=\"translateY(0)\";e.currentTarget.style.borderColor=theme.cardBorder;},children:[/*#__PURE__*/_jsxs(\"div\",{style:{cursor:\"pointer\",flex:1,paddingRight:\"1rem\"},onClick:()=>handleOpenTable(table.id),children:[/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:\"1.2rem\",color:theme.text,transition:\"color 0.3s ease\",display:\"block\",marginBottom:\"0.5rem\"},children:table.tableName}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[/*#__PURE__*/_jsxs(\"span\",{style:{color:theme.accent,fontSize:\"0.9rem\",fontWeight:\"600\",transition:\"color 0.3s ease\"},children:[\"\\uD83D\\uDCC5 \",formatDate(table.date)]}),table.lastOpened&&/*#__PURE__*/_jsxs(\"span\",{style:{opacity:0.7,color:theme.textSecondary,fontSize:\"0.8rem\",transition:\"color 0.3s ease\"},children:[\"Last opened: \",formatDate(table.lastOpened)]})]})]}),!previewMode&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteTable(table.id,table.tableName),style:{background:theme.surfaceSecondary,color:theme.textSecondary,border:\"1px solid \".concat(theme.border),borderRadius:\"8px\",padding:\"0.5rem 1rem\",cursor:\"pointer\",fontWeight:\"600\",transition:\"background 0.2s ease, border-color 0.2s ease\"},onMouseOver:e=>{e.currentTarget.style.background=theme.surfaceTertiary;e.currentTarget.style.borderColor=theme.textMuted;},onMouseOut:e=>{e.currentTarget.style.background=theme.surfaceSecondary;e.currentTarget.style.borderColor=theme.border;},children:\"Delete\"})]},table.id))}),deletePopup.show&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",top:0,left:0,right:0,bottom:0,background:\"rgba(0, 0, 0, 0.8)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:2000,padding:\"1rem\"},onClick:cancelDelete,children:/*#__PURE__*/_jsxs(\"div\",{style:{background:theme.cardBackground,borderRadius:\"16px\",padding:\"2rem\",maxWidth:\"90vw\",width:\"400px\",border:\"1px solid \".concat(theme.cardBorder),boxShadow:theme.shadow,animation:\"popupSlideIn 0.3s ease-out\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:\"1.5rem\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"50px\",height:\"50px\",borderRadius:\"50%\",background:\"rgba(239, 68, 68, 0.1)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",border:\"2px solid rgba(239, 68, 68, 0.3)\"},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"1.5rem\",color:\"#ef4444\"},children:\"\\u26A0\\uFE0F\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,color:theme.text,fontSize:\"1.3rem\",fontWeight:\"600\"},children:\"Delete Log\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"0.5rem 0 0 0\",color:theme.textSecondary,fontSize:\"0.9rem\"},children:\"This action cannot be undone\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:theme.surfaceSecondary,padding:\"1rem\",borderRadius:\"8px\",marginBottom:\"1.5rem\",border:\"1px solid \".concat(theme.borderLight)},children:[/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,color:theme.text,fontSize:\"1rem\",lineHeight:\"1.5\"},children:[\"Are you sure you want to delete \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\\"\",deletePopup.tableName,\"\\\"\"]}),\"?\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"0.5rem 0 0 0\",color:theme.textSecondary,fontSize:\"0.9rem\",lineHeight:\"1.4\"},children:\"All workout data in this log will be permanently removed.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"1rem\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelDelete,style:{background:theme.surfaceSecondary,color:theme.textSecondary,border:\"1px solid \".concat(theme.border),borderRadius:\"8px\",padding:\"0.8rem 1.5rem\",cursor:\"pointer\",fontWeight:\"600\",fontSize:\"1rem\",transition:\"background 0.2s ease, border-color 0.2s ease\"},onMouseOver:e=>{e.currentTarget.style.background=theme.surfaceTertiary;e.currentTarget.style.borderColor=theme.textMuted;},onMouseOut:e=>{e.currentTarget.style.background=theme.surfaceSecondary;e.currentTarget.style.borderColor=theme.border;},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDelete,style:{background:\"#ef4444\",color:\"#fff\",border:\"none\",borderRadius:\"8px\",padding:\"0.8rem 1.5rem\",cursor:\"pointer\",fontWeight:\"600\",fontSize:\"1rem\",transition:\"background 0.2s ease\"},onMouseOver:e=>e.currentTarget.style.background=\"#dc2626\",onMouseOut:e=>e.currentTarget.style.background=\"#ef4444\",children:\"Delete Log\"})]})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}