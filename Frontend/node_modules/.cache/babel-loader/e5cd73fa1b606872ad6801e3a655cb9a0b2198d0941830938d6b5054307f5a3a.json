{"ast":null,"code":"import _objectSpread from\"C:/Users/kidus/OneDrive/Documentos/Summer2025/fitness-tracker-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import{useTheme}from\"../context/ThemeContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AutoComplete(_ref){let{value,onChange,placeholder,suggestions,onFocus,onBlur,style={}}=_ref;const{theme}=useTheme();const[isOpen,setIsOpen]=useState(false);const[filteredSuggestions,setFilteredSuggestions]=useState([]);const[highlightedIndex,setHighlightedIndex]=useState(-1);const[inputValue,setInputValue]=useState(value);const wrapperRef=useRef(null);// Filter suggestions based on input\nuseEffect(()=>{if(inputValue.trim()===''){setFilteredSuggestions(suggestions);}else{const filtered=suggestions.filter(suggestion=>suggestion.toLowerCase().includes(inputValue.toLowerCase()));setFilteredSuggestions(filtered);}setHighlightedIndex(-1);},[inputValue,suggestions]);// Update input value when prop changes\nuseEffect(()=>{setInputValue(value);},[value]);// Handle click outside to close dropdown\nuseEffect(()=>{const handleClickOutside=event=>{if(wrapperRef.current&&!wrapperRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);const handleInputChange=e=>{const newValue=e.target.value;setInputValue(newValue);onChange(newValue);setIsOpen(true);};const handleInputFocus=()=>{setIsOpen(true);if(onFocus)onFocus();};const handleInputBlur=()=>{// Delay closing to allow for clicks on suggestions\nsetTimeout(()=>setIsOpen(false),150);if(onBlur)onBlur();};const handleSuggestionMouseDown=(e,suggestion)=>{e.preventDefault();// Prevent input blur\nsetInputValue(suggestion);onChange(suggestion);setIsOpen(false);};const handleKeyDown=e=>{if(!isOpen)return;switch(e.key){case'ArrowDown':e.preventDefault();setHighlightedIndex(prev=>prev<filteredSuggestions.length-1?prev+1:prev);break;case'ArrowUp':e.preventDefault();setHighlightedIndex(prev=>prev>0?prev-1:-1);break;case'Enter':e.preventDefault();if(highlightedIndex>=0&&filteredSuggestions[highlightedIndex]){const suggestion=filteredSuggestions[highlightedIndex];setInputValue(suggestion);onChange(suggestion);setIsOpen(false);}break;case'Escape':setIsOpen(false);break;default:// No action needed for other keys\nbreak;}};return/*#__PURE__*/_jsxs(\"div\",{ref:wrapperRef,style:{position:'relative',width:'100%'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValue,onChange:handleInputChange,onFocus:handleInputFocus,onBlur:handleInputBlur,onKeyDown:handleKeyDown,placeholder:placeholder,style:_objectSpread({padding:\"0.8rem\",width:\"100%\",borderRadius:\"8px\",border:\"1px solid \".concat(theme.inputBorder),background:theme.inputBackground,color:theme.text,fontSize:\"1rem\",boxSizing:\"border-box\",transition:\"background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease\"},style)}),isOpen&&filteredSuggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,background:theme.cardBackground,border:\"1px solid \".concat(theme.cardBorder),borderRadius:'8px',boxShadow:theme.shadow,zIndex:1000,maxHeight:'200px',overflowY:'auto',marginTop:'4px'},children:filteredSuggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"div\",{onMouseDown:e=>handleSuggestionMouseDown(e,suggestion),style:{padding:'0.8rem',cursor:'pointer',color:theme.text,background:index===highlightedIndex?theme.surfaceSecondary:'transparent',borderBottom:index<filteredSuggestions.length-1?\"1px solid \".concat(theme.borderLight):'none',transition:'background-color 0.2s ease',fontSize:'0.9rem'},onMouseEnter:()=>setHighlightedIndex(index),children:suggestion},suggestion))})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}