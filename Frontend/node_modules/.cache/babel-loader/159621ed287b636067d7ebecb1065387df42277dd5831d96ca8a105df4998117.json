{"ast":null,"code":"import _objectSpread from\"C:/Users/kidus/OneDrive/Documentos/Summer2025/fitness-tracker-frontend/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{useTheme}from\"../context/ThemeContext\";import TrainingLogManager from\"./TrainingLogManager\";import TrainingLogRow from\"./TrainingLogRow\";import WorkoutTemplates from\"./WorkoutTemplates\";import{useAutoSave}from\"../hooks/useAutoSave\";import{useFormKeyboardNavigation}from\"../hooks/useKeyboardShortcuts\";import{saveWorkoutAsTemplate}from\"../services/workoutTemplates\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const manager=new TrainingLogManager();export default function TrainingLogTable(){const{id}=useParams();const navigate=useNavigate();const{theme}=useTheme();const[log,setLog]=useState(null);const[muscleGroupSuggestions,setMuscleGroupSuggestions]=useState([]);const[exerciseSuggestions,setExerciseSuggestions]=useState([]);const[currentMuscleGroup,setCurrentMuscleGroup]=useState(\"\");const[showBackButton,setShowBackButton]=useState(true);const[lastScrollY,setLastScrollY]=useState(0);const[windowWidth,setWindowWidth]=useState(window.innerWidth);const[saveStatus,setSaveStatus]=useState('');const[lastSaveTime,setLastSaveTime]=useState(null);const[showTemplates,setShowTemplates]=useState(false);const[showSaveTemplate,setShowSaveTemplate]=useState(false);const[templateName,setTemplateName]=useState('');const[templateDescription,setTemplateDescription]=useState('');const isMobile=windowWidth<=768;// Window resize detection\nuseEffect(()=>{const handleResize=()=>{setWindowWidth(window.innerWidth);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);useEffect(()=>{const handleScroll=()=>{const currentScrollY=window.scrollY;// Show button if at top of page or scrolling up\nconst isAtTop=currentScrollY<50;const isScrollingUp=currentScrollY<lastScrollY;setShowBackButton(isAtTop||isScrollingUp);setLastScrollY(currentScrollY);};window.addEventListener('scroll',handleScroll,{passive:true});return()=>window.removeEventListener('scroll',handleScroll);},[lastScrollY]);useEffect(()=>{const loadLog=async()=>{const saved=await manager.loadTable(id);if(saved){setLog(saved);}else{const today=new Date().toISOString().split(\"T\")[0];const defaultRow={id:0,muscleGroup:\"\",exercise:\"\",sets:[{reps:\"\",weight:\"\"},{reps:\"\",weight:\"\"}],notes:\"\",showNotes:false,weightUnit:\"lbs\"};const defaultLog={id:id,tableName:\"New Log\",date:today,rows:[defaultRow]};setLog(defaultLog);}};loadLog();},[id]);// Fetch suggestions when component mounts\nuseEffect(()=>{const fetchSuggestions=async()=>{try{const[muscleGroups,exercises]=await Promise.all([manager.getUniqueMuscleGroups(),manager.getUniqueExercises()]);setMuscleGroupSuggestions(muscleGroups);setExerciseSuggestions(exercises);}catch(error){console.error(\"Error fetching suggestions:\",error);}};fetchSuggestions();},[]);// Update exercise suggestions when muscle group changes\nuseEffect(()=>{const fetchExercisesForMuscleGroup=async()=>{if(currentMuscleGroup.trim()){try{const exercises=await manager.getExercisesForMuscleGroup(currentMuscleGroup);setExerciseSuggestions(exercises);}catch(error){console.error(\"Error fetching exercises for muscle group:\",error);}}else{// If no muscle group selected, show all exercises\ntry{const allExercises=await manager.getUniqueExercises();setExerciseSuggestions(allExercises);}catch(error){console.error(\"Error fetching all exercises:\",error);}}};fetchExercisesForMuscleGroup();},[currentMuscleGroup]);const updateRow=(index,updatedRow)=>{setLog(prevLog=>{const newRows=[...prevLog.rows];newRows[index]=_objectSpread(_objectSpread({},newRows[index]),updatedRow);return _objectSpread(_objectSpread({},prevLog),{},{rows:newRows});});};const addRow=()=>{setLog(prevLog=>{const newRow={id:prevLog.rows.length,muscleGroup:\"\",exercise:\"\",sets:[{reps:\"\",weight:\"\"}],notes:\"\",showNotes:false,weightUnit:\"lbs\"};return _objectSpread(_objectSpread({},prevLog),{},{rows:[...prevLog.rows,newRow]});});};const deleteLastRow=()=>{setLog(prevLog=>{if(prevLog.rows.length<=1)return prevLog;const newRows=prevLog.rows.slice(0,-1);return _objectSpread(_objectSpread({},prevLog),{},{rows:newRows});});};const handleApplyTemplate=templateLog=>{setLog(templateLog);setSaveStatus('Template applied');setTimeout(()=>setSaveStatus(''),2000);};const handleRename=e=>{setLog(prevLog=>_objectSpread(_objectSpread({},prevLog),{},{tableName:e.target.value}));};const handleMuscleGroupChange=muscleGroup=>{setCurrentMuscleGroup(muscleGroup);};const handleSaveAsTemplate=async()=>{if(!templateName.trim()){alert('Please enter a template name.');return;}const result=await saveWorkoutAsTemplate(log,templateName.trim(),templateDescription.trim());if(result.success){setSaveStatus(\"Template \\\"\".concat(templateName,\"\\\" saved!\"));setShowSaveTemplate(false);setTemplateName('');setTemplateDescription('');setTimeout(()=>setSaveStatus(''),3000);}else{alert(result.message);}};// Auto-save function for the hook\nconst saveLog=async logData=>{if(logData){try{setSaveStatus('Saving...');await manager.saveTable(logData);setSaveStatus('Saved');setLastSaveTime(new Date());setTimeout(()=>setSaveStatus(''),2000);}catch(error){setSaveStatus('Save failed');console.error('Save error:',error);setTimeout(()=>setSaveStatus(''),3000);throw error;}}};// Use auto-save hook\nconst{save:manualSave}=useAutoSave(saveLog,log,2000,// 2 second delay\ntrue// enabled\n);// Keyboard shortcuts\nuseFormKeyboardNavigation({onSave:()=>{if(log){manualSave();setSaveStatus('Manually saved');setTimeout(()=>setSaveStatus(''),2000);}},onAddRow:e=>{e.preventDefault();addRow();},enabled:true});if(!log){return/*#__PURE__*/_jsx(\"div\",{style:{background:'var(--gradient-backdrop)',minHeight:\"100vh\",display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{color:'var(--primary-100)',fontSize:'var(--font-size-lg)',fontFamily:'var(--font-family-primary)'},children:\"Loading...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"training-log-container\",children:[/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n                .training-log-container {\\n                    padding: \".concat(isMobile?'var(--space-4)':'var(--space-8)',\";\\n                    padding-top: \").concat(isMobile?'var(--space-16)':'var(--space-20)',\";\\n                    color: var(--primary-100);\\n                    background: var(--gradient-backdrop);\\n                    min-height: 100vh;\\n                    position: relative;\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .back-button {\\n                    position: fixed;\\n                    top: var(--space-4);\\n                    left: var(--space-4);\\n                    background: var(--glass-bg);\\n                    backdrop-filter: var(--glass-backdrop);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-lg);\\n                    padding: var(--space-3) var(--space-6);\\n                    color: var(--primary-100);\\n                    font-weight: 600;\\n                    font-size: var(--font-size-sm);\\n                    cursor: pointer;\\n                    z-index: var(--z-fixed);\\n                    transition: var(--transition-normal);\\n                    opacity: \").concat(showBackButton?1:0,\";\\n                    transform: \").concat(showBackButton?'translateY(0)':'translateY(-10px)',\";\\n                    pointer-events: \").concat(showBackButton?'auto':'none',\";\\n                }\\n\\n                .back-button:hover {\\n                    background: rgba(255, 255, 255, 0.12);\\n                    transform: translateY(-2px);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n\\n                .header-section {\\n                    margin-bottom: var(--space-8);\\n                    text-align: center;\\n                }\\n\\n                .workout-title {\\n                    font-size: \").concat(isMobile?'var(--font-size-2xl)':'var(--font-size-4xl)',\";\\n                    font-weight: 700;\\n                    background: transparent;\\n                    border: none;\\n                    border-bottom: 2px solid var(--accent-primary);\\n                    color: var(--accent-primary);\\n                    margin-bottom: var(--space-4);\\n                    width: 100%;\\n                    max-width: 600px;\\n                    padding: var(--space-2) 0;\\n                    text-align: center;\\n                    transition: var(--transition-normal);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .workout-title:focus {\\n                    outline: none;\\n                    border-bottom-color: var(--accent-secondary);\\n                    box-shadow: 0 2px 0 var(--accent-secondary);\\n                }\\n\\n                .date-input {\\n                    background: var(--glass-bg);\\n                    backdrop-filter: var(--glass-backdrop);\\n                    color: var(--primary-100);\\n                    padding: var(--space-3) var(--space-4);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-lg);\\n                    font-weight: 600;\\n                    font-size: var(--font-size-sm);\\n                    cursor: pointer;\\n                    transition: var(--transition-normal);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .date-input:hover {\\n                    background: rgba(255, 255, 255, 0.12);\\n                    border-color: var(--accent-primary);\\n                }\\n\\n                .date-input:focus {\\n                    outline: none;\\n                    border-color: var(--accent-primary);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n\\n                .divider {\\n                    border: none;\\n                    height: 1px;\\n                    background: linear-gradient(90deg, transparent, var(--glass-border), transparent);\\n                    margin: var(--space-8) 0;\\n                }\\n\\n                .controls-section {\\n                    margin-top: var(--space-8);\\n                    padding: var(--space-6);\\n                    background: var(--glass-bg);\\n                    backdrop-filter: var(--glass-backdrop);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-2xl);\\n                    transition: var(--transition-normal);\\n                }\\n\\n                .controls-section:hover {\\n                    background: rgba(255, 255, 255, 0.1);\\n                    border-color: var(--accent-primary);\\n                }\\n\\n                .controls-title {\\n                    margin-bottom: var(--space-4);\\n                    color: var(--accent-primary);\\n                    font-size: var(--font-size-xl);\\n                    font-weight: 700;\\n                    text-align: center;\\n                    background: linear-gradient(45deg, var(--accent-primary), var(--accent-tertiary));\\n                    -webkit-background-clip: text;\\n                    -webkit-text-fill-color: transparent;\\n                    background-clip: text;\\n                }\\n\\n                .button-grid {\\n                    display: grid;\\n                    grid-template-columns: \").concat(isMobile?'1fr':'repeat(auto-fit, minmax(180px, 1fr))',\";\\n                    gap: var(--space-4);\\n                    margin-bottom: var(--space-6);\\n                }\\n\\n                .action-button {\\n                    background: var(--gradient-primary);\\n                    border: none;\\n                    border-radius: var(--radius-lg);\\n                    padding: var(--space-4) var(--space-6);\\n                    color: white;\\n                    font-weight: 700;\\n                    font-size: var(--font-size-sm);\\n                    cursor: pointer;\\n                    transition: var(--transition-normal);\\n                    min-height: 44px;\\n                    display: flex;\\n                    align-items: center;\\n                    justify-content: center;\\n                    gap: var(--space-2);\\n                    box-shadow: var(--shadow-md);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .action-button:hover {\\n                    transform: translateY(-2px);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n\\n                .secondary-button {\\n                    background: var(--glass-bg);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-lg);\\n                    padding: var(--space-4) var(--space-6);\\n                    color: var(--primary-100);\\n                    font-weight: 600;\\n                    font-size: var(--font-size-sm);\\n                    cursor: pointer;\\n                    transition: var(--transition-normal);\\n                    min-height: 44px;\\n                    display: flex;\\n                    align-items: center;\\n                    justify-content: center;\\n                    gap: var(--space-2);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .secondary-button:hover {\\n                    background: rgba(255, 255, 255, 0.12);\\n                    border-color: var(--accent-primary);\\n                    transform: translateY(-1px);\\n                }\\n\\n                .danger-button {\\n                    background: rgba(255, 68, 102, 0.1);\\n                    border: 1px solid rgba(255, 68, 102, 0.3);\\n                    color: var(--accent-error);\\n                }\\n\\n                .danger-button:hover:not(:disabled) {\\n                    background: rgba(255, 68, 102, 0.2);\\n                    border-color: var(--accent-error);\\n                    color: white;\\n                }\\n\\n                .danger-button:disabled {\\n                    background: var(--primary-700);\\n                    border-color: var(--primary-600);\\n                    color: var(--primary-400);\\n                    cursor: not-allowed;\\n                    transform: none;\\n                }\\n\\n                .save-button {\\n                    background: var(--accent-success);\\n                    color: white;\\n                    box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);\\n                }\\n\\n                .save-button:hover {\\n                    box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);\\n                }\\n\\n                .bottom-actions {\\n                    display: flex;\\n                    gap: var(--space-4);\\n                    justify-content: center;\\n                    flex-wrap: wrap;\\n                }\\n\\n                .save-status {\\n                    margin-top: var(--space-3);\\n                    text-align: center;\\n                    font-size: var(--font-size-xs);\\n                    color: var(--primary-300);\\n                    transition: var(--transition-normal);\\n                }\\n\\n                .save-status.error {\\n                    color: var(--accent-error);\\n                }\\n\\n                .save-status.success {\\n                    color: var(--accent-success);\\n                }\\n\\n                .modal-overlay {\\n                    position: fixed;\\n                    top: 0;\\n                    left: 0;\\n                    right: 0;\\n                    bottom: 0;\\n                    background: rgba(10, 11, 15, 0.8);\\n                    backdrop-filter: blur(8px);\\n                    display: flex;\\n                    align-items: center;\\n                    justify-content: center;\\n                    z-index: var(--z-modal-backdrop);\\n                    padding: var(--space-4);\\n                }\\n\\n                .modal {\\n                    background: var(--primary-800);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-2xl);\\n                    padding: var(--space-8);\\n                    max-width: 500px;\\n                    width: 100%;\\n                    box-shadow: var(--shadow-xl);\\n                    transform: scale(0.9);\\n                    animation: modalAppear 0.3s ease forwards;\\n                }\\n\\n                @keyframes modalAppear {\\n                    to {\\n                        transform: scale(1);\\n                    }\\n                }\\n\\n                .modal-title {\\n                    font-size: var(--font-size-xl);\\n                    font-weight: 700;\\n                    color: var(--primary-100);\\n                    margin-bottom: var(--space-6);\\n                    text-align: center;\\n                }\\n\\n                .modal-input {\\n                    width: 100%;\\n                    background: var(--glass-bg);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-lg);\\n                    padding: var(--space-4);\\n                    color: var(--primary-100);\\n                    font-size: var(--font-size-sm);\\n                    margin-bottom: var(--space-4);\\n                    transition: var(--transition-normal);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .modal-input:focus {\\n                    outline: none;\\n                    border-color: var(--accent-primary);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n\\n                .modal-textarea {\\n                    width: 100%;\\n                    background: var(--glass-bg);\\n                    border: 1px solid var(--glass-border);\\n                    border-radius: var(--radius-lg);\\n                    padding: var(--space-4);\\n                    color: var(--primary-100);\\n                    font-size: var(--font-size-sm);\\n                    margin-bottom: var(--space-6);\\n                    resize: vertical;\\n                    min-height: 80px;\\n                    transition: var(--transition-normal);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .modal-textarea:focus {\\n                    outline: none;\\n                    border-color: var(--accent-primary);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n\\n                .modal-actions {\\n                    display: flex;\\n                    gap: var(--space-4);\\n                    justify-content: flex-end;\\n                }\\n\\n                .modal-button {\\n                    padding: var(--space-3) var(--space-6);\\n                    border-radius: var(--radius-lg);\\n                    font-weight: 600;\\n                    cursor: pointer;\\n                    transition: var(--transition-fast);\\n                    border: none;\\n                    font-size: var(--font-size-sm);\\n                    font-family: var(--font-family-primary);\\n                }\\n\\n                .modal-button-cancel {\\n                    background: var(--glass-bg);\\n                    color: var(--primary-200);\\n                    border: 1px solid var(--glass-border);\\n                }\\n\\n                .modal-button-cancel:hover {\\n                    background: rgba(255, 255, 255, 0.12);\\n                    color: var(--primary-100);\\n                }\\n\\n                .modal-button-save {\\n                    background: var(--gradient-primary);\\n                    color: white;\\n                }\\n\\n                .modal-button-save:hover {\\n                    transform: translateY(-1px);\\n                    box-shadow: var(--shadow-glow);\\n                }\\n            \")}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>{console.log(\"Navigating back from table \".concat(id,\" to /log\"));try{navigate(\"/log\",{replace:true});// Force navigation if it doesn't work\nsetTimeout(()=>{if(window.location.pathname.includes('/log/')){console.log(\"Force redirecting to /log\");window.location.href='/log';}},100);}catch(error){console.error(\"Navigation error:\",error);window.location.href='/log';}},children:\"\\u2190 Back to Saved Logs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-section\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:log.tableName,onChange:handleRename,className:\"workout-title\",placeholder:\"Workout Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:log.date,onChange:e=>setLog(prevLog=>_objectSpread(_objectSpread({},prevLog),{},{date:e.target.value})),className:\"date-input\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),log.rows.map((row,index)=>/*#__PURE__*/_jsx(TrainingLogRow,{rowData:row,onUpdate:updated=>updateRow(index,updated),muscleGroupSuggestions:muscleGroupSuggestions,exerciseSuggestions:exerciseSuggestions,onMuscleGroupChange:handleMuscleGroupChange,currentLogId:log.id},row.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"controls-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"controls-title\",children:\"Workout Controls\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-grid\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:addRow,children:\"\\u2795 Add Exercise\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-button\",onClick:()=>setShowTemplates(true),children:\"\\uD83D\\uDCCB Use Template\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-button\",onClick:()=>setShowSaveTemplate(true),children:\"\\uD83D\\uDCBE Save as Template\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-button danger-button\",onClick:deleteLastRow,disabled:log.rows.length<=1,children:\"\\uD83D\\uDDD1 Delete Last\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button save-button\",onClick:()=>{manualSave();setSaveStatus('Manually saved');setTimeout(()=>setSaveStatus(''),2000);},children:saveStatus==='Saving...'?'⏳ Saving...':saveStatus==='Saved'?'✅ Saved':saveStatus==='Save failed'?'❌ Save Failed':'💾 Save Workout (Ctrl+S)'})]}),(saveStatus||lastSaveTime)&&/*#__PURE__*/_jsx(\"div\",{className:\"save-status \".concat(saveStatus==='Save failed'?'error':saveStatus?'success':''),children:saveStatus||lastSaveTime&&\"Last saved: \".concat(lastSaveTime.toLocaleTimeString())})]}),showTemplates&&/*#__PURE__*/_jsx(WorkoutTemplates,{currentLog:log,onApplyTemplate:handleApplyTemplate,onClose:()=>setShowTemplates(false)}),showSaveTemplate&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowSaveTemplate(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-title\",children:\"Save as Template\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Template name\",value:templateName,onChange:e=>setTemplateName(e.target.value),className:\"modal-input\",autoFocus:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description (optional)\",value:templateDescription,onChange:e=>setTemplateDescription(e.target.value),className:\"modal-textarea\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal-button modal-button-cancel\",onClick:()=>{setShowSaveTemplate(false);setTemplateName('');setTemplateDescription('');},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-button modal-button-save\",onClick:handleSaveAsTemplate,children:\"Save Template\"})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","useTheme","TrainingLogManager","TrainingLogRow","WorkoutTemplates","useAutoSave","useFormKeyboardNavigation","saveWorkoutAsTemplate","jsx","_jsx","jsxs","_jsxs","manager","TrainingLogTable","id","navigate","theme","log","setLog","muscleGroupSuggestions","setMuscleGroupSuggestions","exerciseSuggestions","setExerciseSuggestions","currentMuscleGroup","setCurrentMuscleGroup","showBackButton","setShowBackButton","lastScrollY","setLastScrollY","windowWidth","setWindowWidth","window","innerWidth","saveStatus","setSaveStatus","lastSaveTime","setLastSaveTime","showTemplates","setShowTemplates","showSaveTemplate","setShowSaveTemplate","templateName","setTemplateName","templateDescription","setTemplateDescription","isMobile","handleResize","addEventListener","removeEventListener","handleScroll","currentScrollY","scrollY","isAtTop","isScrollingUp","passive","loadLog","saved","loadTable","today","Date","toISOString","split","defaultRow","muscleGroup","exercise","sets","reps","weight","notes","showNotes","weightUnit","defaultLog","tableName","date","rows","fetchSuggestions","muscleGroups","exercises","Promise","all","getUniqueMuscleGroups","getUniqueExercises","error","console","fetchExercisesForMuscleGroup","trim","getExercisesForMuscleGroup","allExercises","updateRow","index","updatedRow","prevLog","newRows","_objectSpread","addRow","newRow","length","deleteLastRow","slice","handleApplyTemplate","templateLog","setTimeout","handleRename","e","target","value","handleMuscleGroupChange","handleSaveAsTemplate","alert","result","success","concat","message","saveLog","logData","saveTable","save","manualSave","onSave","onAddRow","preventDefault","enabled","style","background","minHeight","display","alignItems","justifyContent","children","color","fontSize","fontFamily","className","onClick","replace","location","pathname","includes","href","type","onChange","placeholder","map","row","rowData","onUpdate","updated","onMuscleGroupChange","currentLogId","disabled","toLocaleTimeString","currentLog","onApplyTemplate","onClose","stopPropagation","autoFocus"],"sources":["C:/Users/kidus/OneDrive/Documentos/Summer2025/fitness-tracker-frontend/Frontend/src/components/TrainingLogTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useTheme } from \"../context/ThemeContext\";\r\nimport TrainingLogManager from \"./TrainingLogManager\";\r\nimport TrainingLogRow from \"./TrainingLogRow\";\r\nimport WorkoutTemplates from \"./WorkoutTemplates\";\r\nimport { useAutoSave } from \"../hooks/useAutoSave\";\r\nimport { useFormKeyboardNavigation } from \"../hooks/useKeyboardShortcuts\";\r\nimport { saveWorkoutAsTemplate } from \"../services/workoutTemplates\";\r\n\r\nconst manager = new TrainingLogManager();\r\n\r\nexport default function TrainingLogTable() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { theme } = useTheme();\r\n    const [log, setLog] = useState(null);\r\n    const [muscleGroupSuggestions, setMuscleGroupSuggestions] = useState([]);\r\n    const [exerciseSuggestions, setExerciseSuggestions] = useState([]);\r\n    const [currentMuscleGroup, setCurrentMuscleGroup] = useState(\"\");\r\n    const [showBackButton, setShowBackButton] = useState(true);\r\n    const [lastScrollY, setLastScrollY] = useState(0);\r\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n    const [saveStatus, setSaveStatus] = useState('');\r\n    const [lastSaveTime, setLastSaveTime] = useState(null);\r\n    const [showTemplates, setShowTemplates] = useState(false);\r\n    const [showSaveTemplate, setShowSaveTemplate] = useState(false);\r\n    const [templateName, setTemplateName] = useState('');\r\n    const [templateDescription, setTemplateDescription] = useState('');\r\n\r\n    const isMobile = windowWidth <= 768;\r\n\r\n    // Window resize detection\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setWindowWidth(window.innerWidth);\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            const currentScrollY = window.scrollY;\r\n            \r\n            // Show button if at top of page or scrolling up\r\n            const isAtTop = currentScrollY < 50;\r\n            const isScrollingUp = currentScrollY < lastScrollY;\r\n            \r\n            setShowBackButton(isAtTop || isScrollingUp);\r\n            setLastScrollY(currentScrollY);\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, [lastScrollY]);\r\n\r\n    useEffect(() => {\r\n        const loadLog = async () => {\r\n            const saved = await manager.loadTable(id);\r\n            if (saved) {\r\n                setLog(saved);\r\n            } else {\r\n                const today = new Date().toISOString().split(\"T\")[0];\r\n                const defaultRow = {\r\n                    id: 0,\r\n                    muscleGroup: \"\",\r\n                    exercise: \"\",\r\n                    sets: [\r\n                        { reps: \"\", weight: \"\" },\r\n                        { reps: \"\", weight: \"\" }\r\n                    ],\r\n                    notes: \"\",\r\n                    showNotes: false,\r\n                    weightUnit: \"lbs\"\r\n                };\r\n                const defaultLog = {\r\n                    id: id,\r\n                    tableName: \"New Log\",\r\n                    date: today,\r\n                    rows: [defaultRow]\r\n                };\r\n                setLog(defaultLog);\r\n            }\r\n        };\r\n\r\n        loadLog();\r\n    }, [id]);\r\n\r\n    // Fetch suggestions when component mounts\r\n    useEffect(() => {\r\n        const fetchSuggestions = async () => {\r\n            try {\r\n                const [muscleGroups, exercises] = await Promise.all([\r\n                    manager.getUniqueMuscleGroups(),\r\n                    manager.getUniqueExercises()\r\n                ]);\r\n                setMuscleGroupSuggestions(muscleGroups);\r\n                setExerciseSuggestions(exercises);\r\n            } catch (error) {\r\n                console.error(\"Error fetching suggestions:\", error);\r\n            }\r\n        };\r\n\r\n        fetchSuggestions();\r\n    }, []);\r\n\r\n    // Update exercise suggestions when muscle group changes\r\n    useEffect(() => {\r\n        const fetchExercisesForMuscleGroup = async () => {\r\n            if (currentMuscleGroup.trim()) {\r\n                try {\r\n                    const exercises = await manager.getExercisesForMuscleGroup(currentMuscleGroup);\r\n                    setExerciseSuggestions(exercises);\r\n                } catch (error) {\r\n                    console.error(\"Error fetching exercises for muscle group:\", error);\r\n                }\r\n            } else {\r\n                // If no muscle group selected, show all exercises\r\n                try {\r\n                    const allExercises = await manager.getUniqueExercises();\r\n                    setExerciseSuggestions(allExercises);\r\n                } catch (error) {\r\n                    console.error(\"Error fetching all exercises:\", error);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchExercisesForMuscleGroup();\r\n    }, [currentMuscleGroup]);\r\n\r\n    const updateRow = (index, updatedRow) => {\r\n        setLog(prevLog => {\r\n            const newRows = [...prevLog.rows];\r\n            newRows[index] = { ...newRows[index], ...updatedRow };\r\n            return { ...prevLog, rows: newRows };\r\n        });\r\n    };\r\n\r\n    const addRow = () => {\r\n        setLog(prevLog => {\r\n            const newRow = {\r\n                id: prevLog.rows.length,\r\n                muscleGroup: \"\",\r\n                exercise: \"\",\r\n                sets: [{ reps: \"\", weight: \"\" }],\r\n                notes: \"\",\r\n                showNotes: false,\r\n                weightUnit: \"lbs\"\r\n            };\r\n            return { ...prevLog, rows: [...prevLog.rows, newRow] };\r\n        });\r\n    };\r\n\r\n    const deleteLastRow = () => {\r\n        setLog(prevLog => {\r\n            if (prevLog.rows.length <= 1) return prevLog;\r\n            const newRows = prevLog.rows.slice(0, -1);\r\n            return { ...prevLog, rows: newRows };\r\n        });\r\n    };\r\n\r\n    const handleApplyTemplate = (templateLog) => {\r\n        setLog(templateLog);\r\n        setSaveStatus('Template applied');\r\n        setTimeout(() => setSaveStatus(''), 2000);\r\n    };\r\n\r\n    const handleRename = (e) => {\r\n        setLog(prevLog => ({ ...prevLog, tableName: e.target.value }));\r\n    };\r\n\r\n    const handleMuscleGroupChange = (muscleGroup) => {\r\n        setCurrentMuscleGroup(muscleGroup);\r\n    };\r\n\r\n    const handleSaveAsTemplate = async () => {\r\n        if (!templateName.trim()) {\r\n            alert('Please enter a template name.');\r\n            return;\r\n        }\r\n\r\n        const result = await saveWorkoutAsTemplate(log, templateName.trim(), templateDescription.trim());\r\n        \r\n        if (result.success) {\r\n            setSaveStatus(`Template \"${templateName}\" saved!`);\r\n            setShowSaveTemplate(false);\r\n            setTemplateName('');\r\n            setTemplateDescription('');\r\n            setTimeout(() => setSaveStatus(''), 3000);\r\n        } else {\r\n            alert(result.message);\r\n        }\r\n    };\r\n\r\n    // Auto-save function for the hook\r\n    const saveLog = async (logData) => {\r\n        if (logData) {\r\n            try {\r\n                setSaveStatus('Saving...');\r\n                await manager.saveTable(logData);\r\n                setSaveStatus('Saved');\r\n                setLastSaveTime(new Date());\r\n                setTimeout(() => setSaveStatus(''), 2000);\r\n            } catch (error) {\r\n                setSaveStatus('Save failed');\r\n                console.error('Save error:', error);\r\n                setTimeout(() => setSaveStatus(''), 3000);\r\n                throw error;\r\n            }\r\n        }\r\n    };\r\n\r\n    // Use auto-save hook\r\n    const { save: manualSave } = useAutoSave(\r\n        saveLog,\r\n        log,\r\n        2000, // 2 second delay\r\n        true  // enabled\r\n    );\r\n\r\n    // Keyboard shortcuts\r\n    useFormKeyboardNavigation({\r\n        onSave: () => {\r\n            if (log) {\r\n                manualSave();\r\n                setSaveStatus('Manually saved');\r\n                setTimeout(() => setSaveStatus(''), 2000);\r\n            }\r\n        },\r\n        onAddRow: (e) => {\r\n            e.preventDefault();\r\n            addRow();\r\n        },\r\n        enabled: true\r\n    });\r\n\r\n    if (!log) {\r\n        return (\r\n            <div style={{ \r\n                background: 'var(--gradient-backdrop)', \r\n                minHeight: \"100vh\",\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            }}>\r\n                <div style={{\r\n                    color: 'var(--primary-100)',\r\n                    fontSize: 'var(--font-size-lg)',\r\n                    fontFamily: 'var(--font-family-primary)'\r\n                }}>\r\n                    Loading...\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"training-log-container\">\r\n            <style jsx>{`\r\n                .training-log-container {\r\n                    padding: ${isMobile ? 'var(--space-4)' : 'var(--space-8)'};\r\n                    padding-top: ${isMobile ? 'var(--space-16)' : 'var(--space-20)'};\r\n                    color: var(--primary-100);\r\n                    background: var(--gradient-backdrop);\r\n                    min-height: 100vh;\r\n                    position: relative;\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .back-button {\r\n                    position: fixed;\r\n                    top: var(--space-4);\r\n                    left: var(--space-4);\r\n                    background: var(--glass-bg);\r\n                    backdrop-filter: var(--glass-backdrop);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-lg);\r\n                    padding: var(--space-3) var(--space-6);\r\n                    color: var(--primary-100);\r\n                    font-weight: 600;\r\n                    font-size: var(--font-size-sm);\r\n                    cursor: pointer;\r\n                    z-index: var(--z-fixed);\r\n                    transition: var(--transition-normal);\r\n                    opacity: ${showBackButton ? 1 : 0};\r\n                    transform: ${showBackButton ? 'translateY(0)' : 'translateY(-10px)'};\r\n                    pointer-events: ${showBackButton ? 'auto' : 'none'};\r\n                }\r\n\r\n                .back-button:hover {\r\n                    background: rgba(255, 255, 255, 0.12);\r\n                    transform: translateY(-2px);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n\r\n                .header-section {\r\n                    margin-bottom: var(--space-8);\r\n                    text-align: center;\r\n                }\r\n\r\n                .workout-title {\r\n                    font-size: ${isMobile ? 'var(--font-size-2xl)' : 'var(--font-size-4xl)'};\r\n                    font-weight: 700;\r\n                    background: transparent;\r\n                    border: none;\r\n                    border-bottom: 2px solid var(--accent-primary);\r\n                    color: var(--accent-primary);\r\n                    margin-bottom: var(--space-4);\r\n                    width: 100%;\r\n                    max-width: 600px;\r\n                    padding: var(--space-2) 0;\r\n                    text-align: center;\r\n                    transition: var(--transition-normal);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .workout-title:focus {\r\n                    outline: none;\r\n                    border-bottom-color: var(--accent-secondary);\r\n                    box-shadow: 0 2px 0 var(--accent-secondary);\r\n                }\r\n\r\n                .date-input {\r\n                    background: var(--glass-bg);\r\n                    backdrop-filter: var(--glass-backdrop);\r\n                    color: var(--primary-100);\r\n                    padding: var(--space-3) var(--space-4);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-lg);\r\n                    font-weight: 600;\r\n                    font-size: var(--font-size-sm);\r\n                    cursor: pointer;\r\n                    transition: var(--transition-normal);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .date-input:hover {\r\n                    background: rgba(255, 255, 255, 0.12);\r\n                    border-color: var(--accent-primary);\r\n                }\r\n\r\n                .date-input:focus {\r\n                    outline: none;\r\n                    border-color: var(--accent-primary);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n\r\n                .divider {\r\n                    border: none;\r\n                    height: 1px;\r\n                    background: linear-gradient(90deg, transparent, var(--glass-border), transparent);\r\n                    margin: var(--space-8) 0;\r\n                }\r\n\r\n                .controls-section {\r\n                    margin-top: var(--space-8);\r\n                    padding: var(--space-6);\r\n                    background: var(--glass-bg);\r\n                    backdrop-filter: var(--glass-backdrop);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-2xl);\r\n                    transition: var(--transition-normal);\r\n                }\r\n\r\n                .controls-section:hover {\r\n                    background: rgba(255, 255, 255, 0.1);\r\n                    border-color: var(--accent-primary);\r\n                }\r\n\r\n                .controls-title {\r\n                    margin-bottom: var(--space-4);\r\n                    color: var(--accent-primary);\r\n                    font-size: var(--font-size-xl);\r\n                    font-weight: 700;\r\n                    text-align: center;\r\n                    background: linear-gradient(45deg, var(--accent-primary), var(--accent-tertiary));\r\n                    -webkit-background-clip: text;\r\n                    -webkit-text-fill-color: transparent;\r\n                    background-clip: text;\r\n                }\r\n\r\n                .button-grid {\r\n                    display: grid;\r\n                    grid-template-columns: ${isMobile ? '1fr' : 'repeat(auto-fit, minmax(180px, 1fr))'};\r\n                    gap: var(--space-4);\r\n                    margin-bottom: var(--space-6);\r\n                }\r\n\r\n                .action-button {\r\n                    background: var(--gradient-primary);\r\n                    border: none;\r\n                    border-radius: var(--radius-lg);\r\n                    padding: var(--space-4) var(--space-6);\r\n                    color: white;\r\n                    font-weight: 700;\r\n                    font-size: var(--font-size-sm);\r\n                    cursor: pointer;\r\n                    transition: var(--transition-normal);\r\n                    min-height: 44px;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    gap: var(--space-2);\r\n                    box-shadow: var(--shadow-md);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .action-button:hover {\r\n                    transform: translateY(-2px);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n\r\n                .secondary-button {\r\n                    background: var(--glass-bg);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-lg);\r\n                    padding: var(--space-4) var(--space-6);\r\n                    color: var(--primary-100);\r\n                    font-weight: 600;\r\n                    font-size: var(--font-size-sm);\r\n                    cursor: pointer;\r\n                    transition: var(--transition-normal);\r\n                    min-height: 44px;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    gap: var(--space-2);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .secondary-button:hover {\r\n                    background: rgba(255, 255, 255, 0.12);\r\n                    border-color: var(--accent-primary);\r\n                    transform: translateY(-1px);\r\n                }\r\n\r\n                .danger-button {\r\n                    background: rgba(255, 68, 102, 0.1);\r\n                    border: 1px solid rgba(255, 68, 102, 0.3);\r\n                    color: var(--accent-error);\r\n                }\r\n\r\n                .danger-button:hover:not(:disabled) {\r\n                    background: rgba(255, 68, 102, 0.2);\r\n                    border-color: var(--accent-error);\r\n                    color: white;\r\n                }\r\n\r\n                .danger-button:disabled {\r\n                    background: var(--primary-700);\r\n                    border-color: var(--primary-600);\r\n                    color: var(--primary-400);\r\n                    cursor: not-allowed;\r\n                    transform: none;\r\n                }\r\n\r\n                .save-button {\r\n                    background: var(--accent-success);\r\n                    color: white;\r\n                    box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);\r\n                }\r\n\r\n                .save-button:hover {\r\n                    box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);\r\n                }\r\n\r\n                .bottom-actions {\r\n                    display: flex;\r\n                    gap: var(--space-4);\r\n                    justify-content: center;\r\n                    flex-wrap: wrap;\r\n                }\r\n\r\n                .save-status {\r\n                    margin-top: var(--space-3);\r\n                    text-align: center;\r\n                    font-size: var(--font-size-xs);\r\n                    color: var(--primary-300);\r\n                    transition: var(--transition-normal);\r\n                }\r\n\r\n                .save-status.error {\r\n                    color: var(--accent-error);\r\n                }\r\n\r\n                .save-status.success {\r\n                    color: var(--accent-success);\r\n                }\r\n\r\n                .modal-overlay {\r\n                    position: fixed;\r\n                    top: 0;\r\n                    left: 0;\r\n                    right: 0;\r\n                    bottom: 0;\r\n                    background: rgba(10, 11, 15, 0.8);\r\n                    backdrop-filter: blur(8px);\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    z-index: var(--z-modal-backdrop);\r\n                    padding: var(--space-4);\r\n                }\r\n\r\n                .modal {\r\n                    background: var(--primary-800);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-2xl);\r\n                    padding: var(--space-8);\r\n                    max-width: 500px;\r\n                    width: 100%;\r\n                    box-shadow: var(--shadow-xl);\r\n                    transform: scale(0.9);\r\n                    animation: modalAppear 0.3s ease forwards;\r\n                }\r\n\r\n                @keyframes modalAppear {\r\n                    to {\r\n                        transform: scale(1);\r\n                    }\r\n                }\r\n\r\n                .modal-title {\r\n                    font-size: var(--font-size-xl);\r\n                    font-weight: 700;\r\n                    color: var(--primary-100);\r\n                    margin-bottom: var(--space-6);\r\n                    text-align: center;\r\n                }\r\n\r\n                .modal-input {\r\n                    width: 100%;\r\n                    background: var(--glass-bg);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-lg);\r\n                    padding: var(--space-4);\r\n                    color: var(--primary-100);\r\n                    font-size: var(--font-size-sm);\r\n                    margin-bottom: var(--space-4);\r\n                    transition: var(--transition-normal);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .modal-input:focus {\r\n                    outline: none;\r\n                    border-color: var(--accent-primary);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n\r\n                .modal-textarea {\r\n                    width: 100%;\r\n                    background: var(--glass-bg);\r\n                    border: 1px solid var(--glass-border);\r\n                    border-radius: var(--radius-lg);\r\n                    padding: var(--space-4);\r\n                    color: var(--primary-100);\r\n                    font-size: var(--font-size-sm);\r\n                    margin-bottom: var(--space-6);\r\n                    resize: vertical;\r\n                    min-height: 80px;\r\n                    transition: var(--transition-normal);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .modal-textarea:focus {\r\n                    outline: none;\r\n                    border-color: var(--accent-primary);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n\r\n                .modal-actions {\r\n                    display: flex;\r\n                    gap: var(--space-4);\r\n                    justify-content: flex-end;\r\n                }\r\n\r\n                .modal-button {\r\n                    padding: var(--space-3) var(--space-6);\r\n                    border-radius: var(--radius-lg);\r\n                    font-weight: 600;\r\n                    cursor: pointer;\r\n                    transition: var(--transition-fast);\r\n                    border: none;\r\n                    font-size: var(--font-size-sm);\r\n                    font-family: var(--font-family-primary);\r\n                }\r\n\r\n                .modal-button-cancel {\r\n                    background: var(--glass-bg);\r\n                    color: var(--primary-200);\r\n                    border: 1px solid var(--glass-border);\r\n                }\r\n\r\n                .modal-button-cancel:hover {\r\n                    background: rgba(255, 255, 255, 0.12);\r\n                    color: var(--primary-100);\r\n                }\r\n\r\n                .modal-button-save {\r\n                    background: var(--gradient-primary);\r\n                    color: white;\r\n                }\r\n\r\n                .modal-button-save:hover {\r\n                    transform: translateY(-1px);\r\n                    box-shadow: var(--shadow-glow);\r\n                }\r\n            `}</style>\r\n\r\n            <button\r\n                className=\"back-button\"\r\n                onClick={() => {\r\n                    console.log(`Navigating back from table ${id} to /log`);\r\n                    try {\r\n                        navigate(\"/log\", { replace: true });\r\n                        // Force navigation if it doesn't work\r\n                        setTimeout(() => {\r\n                            if (window.location.pathname.includes('/log/')) {\r\n                                console.log(\"Force redirecting to /log\");\r\n                                window.location.href = '/log';\r\n                            }\r\n                        }, 100);\r\n                    } catch (error) {\r\n                        console.error(\"Navigation error:\", error);\r\n                        window.location.href = '/log';\r\n                    }\r\n                }}\r\n            >\r\n                ← Back to Saved Logs\r\n            </button>\r\n\r\n            <div className=\"header-section\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={log.tableName}\r\n                    onChange={handleRename}\r\n                    className=\"workout-title\"\r\n                    placeholder=\"Workout Name\"\r\n                />\r\n\r\n                <input\r\n                    type=\"date\"\r\n                    value={log.date}\r\n                    onChange={(e) => setLog(prevLog => ({ ...prevLog, date: e.target.value }))}\r\n                    className=\"date-input\"\r\n                />\r\n            </div>\r\n\r\n            <hr className=\"divider\" />\r\n\r\n            {log.rows.map((row, index) => (\r\n                <TrainingLogRow\r\n                    key={row.id}\r\n                    rowData={row}\r\n                    onUpdate={(updated) => updateRow(index, updated)}\r\n                    muscleGroupSuggestions={muscleGroupSuggestions}\r\n                    exerciseSuggestions={exerciseSuggestions}\r\n                    onMuscleGroupChange={handleMuscleGroupChange}\r\n                    currentLogId={log.id}\r\n                />\r\n            ))}\r\n\r\n            <div className=\"controls-section\">\r\n                <h3 className=\"controls-title\">Workout Controls</h3>\r\n                \r\n                <div className=\"button-grid\">\r\n                    <button className=\"action-button\" onClick={addRow}>\r\n                        ➕ Add Exercise\r\n                    </button>\r\n                    \r\n                    <button className=\"secondary-button\" onClick={() => setShowTemplates(true)}>\r\n                        📋 Use Template\r\n                    </button>\r\n                    \r\n                    <button className=\"secondary-button\" onClick={() => setShowSaveTemplate(true)}>\r\n                        💾 Save as Template\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"bottom-actions\">\r\n                    <button\r\n                        className=\"secondary-button danger-button\"\r\n                        onClick={deleteLastRow}\r\n                        disabled={log.rows.length <= 1}\r\n                    >\r\n                        🗑 Delete Last\r\n                    </button>\r\n                    \r\n                    <button\r\n                        className=\"action-button save-button\"\r\n                        onClick={() => {\r\n                            manualSave();\r\n                            setSaveStatus('Manually saved');\r\n                            setTimeout(() => setSaveStatus(''), 2000);\r\n                        }}\r\n                    >\r\n                        {saveStatus === 'Saving...' ? '⏳ Saving...' : \r\n                         saveStatus === 'Saved' ? '✅ Saved' : \r\n                         saveStatus === 'Save failed' ? '❌ Save Failed' : \r\n                         '💾 Save Workout (Ctrl+S)'}\r\n                    </button>\r\n                </div>\r\n                \r\n                {/* Save Status Indicator */}\r\n                {(saveStatus || lastSaveTime) && (\r\n                    <div className={`save-status ${saveStatus === 'Save failed' ? 'error' : saveStatus ? 'success' : ''}`}>\r\n                        {saveStatus || (lastSaveTime && `Last saved: ${lastSaveTime.toLocaleTimeString()}`)}\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            {/* Workout Templates Modal */}\r\n            {showTemplates && (\r\n                <WorkoutTemplates\r\n                    currentLog={log}\r\n                    onApplyTemplate={handleApplyTemplate}\r\n                    onClose={() => setShowTemplates(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Save as Template Modal */}\r\n            {showSaveTemplate && (\r\n                <div className=\"modal-overlay\" onClick={() => setShowSaveTemplate(false)}>\r\n                    <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n                        <h3 className=\"modal-title\">Save as Template</h3>\r\n                        \r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Template name\"\r\n                            value={templateName}\r\n                            onChange={(e) => setTemplateName(e.target.value)}\r\n                            className=\"modal-input\"\r\n                            autoFocus\r\n                        />\r\n                        \r\n                        <textarea\r\n                            placeholder=\"Description (optional)\"\r\n                            value={templateDescription}\r\n                            onChange={(e) => setTemplateDescription(e.target.value)}\r\n                            className=\"modal-textarea\"\r\n                        />\r\n                        \r\n                        <div className=\"modal-actions\">\r\n                            <button\r\n                                className=\"modal-button modal-button-cancel\"\r\n                                onClick={() => {\r\n                                    setShowSaveTemplate(false);\r\n                                    setTemplateName('');\r\n                                    setTemplateDescription('');\r\n                                }}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                className=\"modal-button modal-button-save\"\r\n                                onClick={handleSaveAsTemplate}\r\n                            >\r\n                                Save Template\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}