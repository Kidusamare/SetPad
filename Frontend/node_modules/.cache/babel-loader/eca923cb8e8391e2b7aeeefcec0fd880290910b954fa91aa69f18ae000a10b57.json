{"ast":null,"code":"import _objectSpread from\"C:/Users/kidus/OneDrive/Documentos/Summer2025/fitness-tracker-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import TrainingLogRow from\"./TrainingLogRow\";import TrainingLogManager from\"./TrainingLogManager\";import{getFirebaseUserAndToken}from\"../utils/auth\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TrainingLogTable(){const{id}=useParams();const navigate=useNavigate();const[log,setLog]=useState(null);const[manager,setManager]=useState(null);useEffect(()=>{async function fetchLog(){const session=await getFirebaseUserAndToken();if(!session)return;const mgr=new TrainingLogManager(session.token);setManager(mgr);try{const loaded=await mgr.loadTable(id);setLog(loaded);}catch(_unused){const today=new Date().toISOString().split(\"T\")[0];setLog({id,tableName:\"New Table - \".concat(today),date:today,rows:[]});}}fetchLog();},[id]);useEffect(()=>{if(!manager||!log)return;const timer=setTimeout(()=>{manager.saveTable(log);},500);return()=>clearTimeout(timer);},[log,manager]);const updateRow=(index,updatedRow)=>{const newRows=[...log.rows];newRows[index]=_objectSpread(_objectSpread({},newRows[index]),updatedRow);setLog(_objectSpread(_objectSpread({},log),{},{rows:newRows}));};const addRow=()=>{const newRow={id:log.rows.length,muscleGroup:\"Strength-Focus\",exercise:\"\",sets:[{reps:\"\",weight:\"\"}],notes:\"No notes\",showNotes:false,weightUnit:\"lbs\"};setLog(_objectSpread(_objectSpread({},log),{},{rows:[...log.rows,newRow]}));};const deleteLastRow=()=>{if(log.rows.length<=1)return;const newRows=log.rows.slice(0,-1);setLog(_objectSpread(_objectSpread({},log),{},{rows:newRows}));};if(!log)return/*#__PURE__*/_jsx(\"div\",{style:{background:\"#000\",minHeight:\"100vh\"}});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\",color:\"#f5f6fa\",background:\"#000\",minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),style:{background:\"#31363f\",color:\"#ffd966\",padding:\"0.4rem 1rem\",border:\"none\",borderRadius:\"6px\",cursor:\"pointer\",marginBottom:\"1rem\"},children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h2\",{children:log.tableName}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:log.date,onChange:e=>setLog(_objectSpread(_objectSpread({},log),{},{date:e.target.value})),style:{marginBottom:\"1rem\",display:\"block\"}}),/*#__PURE__*/_jsx(\"hr\",{}),log.rows.map((row,index)=>/*#__PURE__*/_jsx(TrainingLogRow,{rowData:row,onUpdate:updated=>updateRow(index,updated)},row.id)),/*#__PURE__*/_jsx(\"button\",{onClick:addRow,children:\"+ Add Exercise\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteLastRow,disabled:log.rows.length<=1,children:\"- Delete Last\"})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","TrainingLogRow","TrainingLogManager","getFirebaseUserAndToken","jsx","_jsx","jsxs","_jsxs","TrainingLogTable","id","navigate","log","setLog","manager","setManager","fetchLog","session","mgr","token","loaded","loadTable","_unused","today","Date","toISOString","split","tableName","concat","date","rows","timer","setTimeout","saveTable","clearTimeout","updateRow","index","updatedRow","newRows","_objectSpread","addRow","newRow","length","muscleGroup","exercise","sets","reps","weight","notes","showNotes","weightUnit","deleteLastRow","slice","style","background","minHeight","padding","color","children","onClick","border","borderRadius","cursor","marginBottom","type","value","onChange","e","target","display","map","row","rowData","onUpdate","updated","disabled"],"sources":["C:/Users/kidus/OneDrive/Documentos/Summer2025/fitness-tracker-frontend/src/components/TrainingLogTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport TrainingLogRow from \"./TrainingLogRow\";\r\nimport TrainingLogManager from \"./TrainingLogManager\";\r\nimport { getFirebaseUserAndToken } from \"../utils/auth\";\r\n\r\nexport default function TrainingLogTable() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [log, setLog] = useState(null);\r\n  const [manager, setManager] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchLog() {\r\n      const session = await getFirebaseUserAndToken();\r\n      if (!session) return;\r\n      const mgr = new TrainingLogManager(session.token);\r\n      setManager(mgr);\r\n      try {\r\n        const loaded = await mgr.loadTable(id);\r\n        setLog(loaded);\r\n      } catch {\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        setLog({\r\n          id,\r\n          tableName: `New Table - ${today}`,\r\n          date: today,\r\n          rows: []\r\n        });\r\n      }\r\n    }\r\n    fetchLog();\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    if (!manager || !log) return;\r\n    const timer = setTimeout(() => {\r\n      manager.saveTable(log);\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, [log, manager]);\r\n\r\n  const updateRow = (index, updatedRow) => {\r\n    const newRows = [...log.rows];\r\n    newRows[index] = { ...newRows[index], ...updatedRow };\r\n    setLog({ ...log, rows: newRows });\r\n  };\r\n\r\n  const addRow = () => {\r\n    const newRow = {\r\n      id: log.rows.length,\r\n      muscleGroup: \"Strength-Focus\",\r\n      exercise: \"\",\r\n      sets: [{ reps: \"\", weight: \"\" }],\r\n      notes: \"No notes\",\r\n      showNotes: false,\r\n      weightUnit: \"lbs\"\r\n    };\r\n    setLog({ ...log, rows: [...log.rows, newRow] });\r\n  };\r\n\r\n  const deleteLastRow = () => {\r\n    if (log.rows.length <= 1) return;\r\n    const newRows = log.rows.slice(0, -1);\r\n    setLog({ ...log, rows: newRows });\r\n  };\r\n\r\n  if (!log) return <div style={{ background: \"#000\", minHeight: \"100vh\" }}></div>;\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\", color: \"#f5f6fa\", background: \"#000\", minHeight: \"100vh\" }}>\r\n      <button\r\n        onClick={() => navigate(\"/\")}\r\n        style={{\r\n          background: \"#31363f\",\r\n          color: \"#ffd966\",\r\n          padding: \"0.4rem 1rem\",\r\n          border: \"none\",\r\n          borderRadius: \"6px\",\r\n          cursor: \"pointer\",\r\n          marginBottom: \"1rem\"\r\n        }}\r\n      >\r\n        ‚Üê Back\r\n      </button>\r\n\r\n      <h2>{log.tableName}</h2>\r\n      <input\r\n        type=\"date\"\r\n        value={log.date}\r\n        onChange={(e) => setLog({ ...log, date: e.target.value })}\r\n        style={{ marginBottom: \"1rem\", display: \"block\" }}\r\n      />\r\n      <hr />\r\n\r\n      {log.rows.map((row, index) => (\r\n        <TrainingLogRow\r\n          key={row.id}\r\n          rowData={row}\r\n          onUpdate={(updated) => updateRow(index, updated)}\r\n        />\r\n      ))}\r\n\r\n      <button onClick={addRow}>+ Add Exercise</button>\r\n      <button onClick={deleteLastRow} disabled={log.rows.length <= 1}>\r\n        - Delete Last\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n    "],"mappings":"2JAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,OAASC,uBAAuB,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,cAAe,SAAS,CAAAC,gBAAgBA,CAAA,CAAG,CACzC,KAAM,CAAEC,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,cAAe,CAAAkB,QAAQA,CAAA,CAAG,CACxB,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAb,uBAAuB,CAAC,CAAC,CAC/C,GAAI,CAACa,OAAO,CAAE,OACd,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAf,kBAAkB,CAACc,OAAO,CAACE,KAAK,CAAC,CACjDJ,UAAU,CAACG,GAAG,CAAC,CACf,GAAI,CACF,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAAF,GAAG,CAACG,SAAS,CAACX,EAAE,CAAC,CACtCG,MAAM,CAACO,MAAM,CAAC,CAChB,CAAE,MAAAE,OAAA,CAAM,CACN,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACpDb,MAAM,CAAC,CACLH,EAAE,CACFiB,SAAS,gBAAAC,MAAA,CAAiBL,KAAK,CAAE,CACjCM,IAAI,CAAEN,KAAK,CACXO,IAAI,CAAE,EACR,CAAC,CAAC,CACJ,CACF,CACAd,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,CAACN,EAAE,CAAC,CAAC,CAERZ,SAAS,CAAC,IAAM,CACd,GAAI,CAACgB,OAAO,EAAI,CAACF,GAAG,CAAE,OACtB,KAAM,CAAAmB,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BlB,OAAO,CAACmB,SAAS,CAACrB,GAAG,CAAC,CACxB,CAAC,CAAE,GAAG,CAAC,CACP,MAAO,IAAMsB,YAAY,CAACH,KAAK,CAAC,CAClC,CAAC,CAAE,CAACnB,GAAG,CAAEE,OAAO,CAAC,CAAC,CAElB,KAAM,CAAAqB,SAAS,CAAGA,CAACC,KAAK,CAAEC,UAAU,GAAK,CACvC,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAG1B,GAAG,CAACkB,IAAI,CAAC,CAC7BQ,OAAO,CAACF,KAAK,CAAC,CAAAG,aAAA,CAAAA,aAAA,IAAQD,OAAO,CAACF,KAAK,CAAC,EAAKC,UAAU,CAAE,CACrDxB,MAAM,CAAA0B,aAAA,CAAAA,aAAA,IAAM3B,GAAG,MAAEkB,IAAI,CAAEQ,OAAO,EAAE,CAAC,CACnC,CAAC,CAED,KAAM,CAAAE,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,MAAM,CAAG,CACb/B,EAAE,CAAEE,GAAG,CAACkB,IAAI,CAACY,MAAM,CACnBC,WAAW,CAAE,gBAAgB,CAC7BC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,CAAC,CAAEC,IAAI,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAC,CAChCC,KAAK,CAAE,UAAU,CACjBC,SAAS,CAAE,KAAK,CAChBC,UAAU,CAAE,KACd,CAAC,CACDrC,MAAM,CAAA0B,aAAA,CAAAA,aAAA,IAAM3B,GAAG,MAAEkB,IAAI,CAAE,CAAC,GAAGlB,GAAG,CAACkB,IAAI,CAAEW,MAAM,CAAC,EAAE,CAAC,CACjD,CAAC,CAED,KAAM,CAAAU,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAIvC,GAAG,CAACkB,IAAI,CAACY,MAAM,EAAI,CAAC,CAAE,OAC1B,KAAM,CAAAJ,OAAO,CAAG1B,GAAG,CAACkB,IAAI,CAACsB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CACrCvC,MAAM,CAAA0B,aAAA,CAAAA,aAAA,IAAM3B,GAAG,MAAEkB,IAAI,CAAEQ,OAAO,EAAE,CAAC,CACnC,CAAC,CAED,GAAI,CAAC1B,GAAG,CAAE,mBAAON,IAAA,QAAK+C,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAM,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAM,CAAC,CAE/E,mBACE/C,KAAA,QAAK6C,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAEH,UAAU,CAAE,MAAM,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAAG,QAAA,eACxFpD,IAAA,WACEqD,OAAO,CAAEA,CAAA,GAAMhD,QAAQ,CAAC,GAAG,CAAE,CAC7B0C,KAAK,CAAE,CACLC,UAAU,CAAE,SAAS,CACrBG,KAAK,CAAE,SAAS,CAChBD,OAAO,CAAE,aAAa,CACtBI,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBC,YAAY,CAAE,MAChB,CAAE,CAAAL,QAAA,CACH,aAED,CAAQ,CAAC,cAETpD,IAAA,OAAAoD,QAAA,CAAK9C,GAAG,CAACe,SAAS,CAAK,CAAC,cACxBrB,IAAA,UACE0D,IAAI,CAAC,MAAM,CACXC,KAAK,CAAErD,GAAG,CAACiB,IAAK,CAChBqC,QAAQ,CAAGC,CAAC,EAAKtD,MAAM,CAAA0B,aAAA,CAAAA,aAAA,IAAM3B,GAAG,MAAEiB,IAAI,CAAEsC,CAAC,CAACC,MAAM,CAACH,KAAK,EAAE,CAAE,CAC1DZ,KAAK,CAAE,CAAEU,YAAY,CAAE,MAAM,CAAEM,OAAO,CAAE,OAAQ,CAAE,CACnD,CAAC,cACF/D,IAAA,QAAK,CAAC,CAELM,GAAG,CAACkB,IAAI,CAACwC,GAAG,CAAC,CAACC,GAAG,CAAEnC,KAAK,gBACvB9B,IAAA,CAACJ,cAAc,EAEbsE,OAAO,CAAED,GAAI,CACbE,QAAQ,CAAGC,OAAO,EAAKvC,SAAS,CAACC,KAAK,CAAEsC,OAAO,CAAE,EAF5CH,GAAG,CAAC7D,EAGV,CACF,CAAC,cAEFJ,IAAA,WAAQqD,OAAO,CAAEnB,MAAO,CAAAkB,QAAA,CAAC,gBAAc,CAAQ,CAAC,cAChDpD,IAAA,WAAQqD,OAAO,CAAER,aAAc,CAACwB,QAAQ,CAAE/D,GAAG,CAACkB,IAAI,CAACY,MAAM,EAAI,CAAE,CAAAgB,QAAA,CAAC,eAEhE,CAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}